{"version":3,"sources":["src/VueSimplePicker.vue","index.js"],"names":["Vue","component","VueSimplePicker"],"mappings":"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","file":"index.map","sourceRoot":"..","sourcesContent":["<!-- picker -->\n<template>\n    <div class=\"vsim-picker\">\n        <div class=\"vsim-picker-content\" ref=\"parent\">\n            <ul class=\"vsim-picker-list\" v-for=\"(list,index) in data\" :key=\"index\" @touchstart=\"onTouchStart($event,index)\" @touchmove=\"onTouchMove($event,index)\" @touchend=\"onTouchEnd($event,index)\" :style=\"{textAlign: list.textAlign || 'center'}\">\n                <li class=\"vsim-picker-item\"  v-for=\"(item,number) in list.values\" :key=\"number\">{{list.valueKey ? item[list.valueKey]:item}}</li>\n            </ul>\n        </div>\n        <div class=\"vsim-picker-line-top\"></div>\n        <div class=\"vsim-picker-line-bottom\"></div>\n    </div>\n</template>\n\n<script>\nexport default {\n  name: \"VuePicker\",\n  props: {\n    data: {\n      default: function() {\n        return [];\n      }\n    },\n  },\n  data() {\n    return {\n      timer: \"\",\n      value: []\n    };\n  },\n\n  components: {},\n\n  computed: {},\n\n  mounted() {\n    this.pickerInit();\n  },\n  watch: {\n    data: {\n      handler: function(nextProp, oldProp) {\n        if (JSON.stringify(nextProp) === JSON.stringify(oldProp)) {\n          return;\n        }\n        this.value = [];\n        this.pickerInit();\n      },\n      deep: true\n    }\n  },\n  methods: {\n    // 通过索引找到对应数据\n    computeValue(value) {\n      return value.map((item, index) => {\n        return this.data[index].values[item];\n      });\n    },\n    // 给选中的picker加active类名\n    addClass(order, index, num = 2) {\n      this.$nextTick(() => {\n        if (this.$refs.parent.children[order].children[index + 1])\n          this.$refs.parent.children[order].children[index + 1].className =\n            \"vsim-picker-item vsim-picker-item-scale9\";\n\n        if (this.$refs.parent.children[order].children[index - 1])\n          this.$refs.parent.children[order].children[index - 1].className =\n            \"vsim-picker-item vsim-picker-item-scale9\";\n\n        if (this.$refs.parent.children[order].children[index + 2])\n          this.$refs.parent.children[order].children[index + 2].className =\n            \"vsim-picker-item vsim-picker-item-scale8\";\n\n        if (this.$refs.parent.children[order].children[index - 2])\n          this.$refs.parent.children[order].children[index - 2].className =\n            \"vsim-picker-item vsim-picker-item-scale8\";\n\n            this.$refs.parent.children[order].children[index].className =\n        \"vsim-picker-item vsim-picker-item-active\";\n    \n      });\n    },\n    // 加载picker到默认选项\n    pickerInit() {\n      this.$nextTick(() => {\n        [...this.$refs.parent.children].forEach((element, index) => {\n          this.endMove(element, this.data[index].default, 32, 0, index);\n        });\n      });\n    },\n    // 动画\n    transformStyle(target, moveDistance, transition, timer = 200) {\n      target.style[\"-webkit-transform\"] =\n        \"translate3d(0,\" + moveDistance + \"px,0)\";\n      if (transition) {\n        target.style.transitionDuration = timer + \"ms\";\n      }\n    },\n    onTouchStart(e, index) {\n      e.preventDefault();\n      const target = e.target.parentElement;\n      const touch = e.touches[0];\n      const touchY = touch.screenY;\n      const screenY = touch.screenY;\n      target.setAttribute(\"address-start\", touchY);\n      const timestamp = new Date().getTime(); // 当前时间戳\n      target.setAttribute(\"start-time\", timestamp);\n      if (!target.getAttribute(\"mov-distance\")) {\n        // 存储当前位置\n        target.setAttribute(\"pos-start\", touchY);\n      } else {\n        target.setAttribute(\n          \"pos-start\",\n          touchY - parseFloat(target.getAttribute(\"mov-distance\"))\n        );\n      }\n      target.style.transitionDuration = \"0ms\";\n    },\n    onTouchMove(e, index) {\n      e.preventDefault();\n      const target = e.target.parentElement;\n      const touch = e.touches[0];\n\n      const touchY = touch.screenY;\n      // 获取移动距离\n      const moveDistance = touchY - target.getAttribute(\"pos-start\");\n      target.setAttribute(\"pos-end\", touchY);\n      target.setAttribute(\"address-end\", touchY);\n      // 移动\n      this.transformStyle(target, moveDistance);\n    },\n    onTouchEnd(e, order) {\n      e.preventDefault();\n      const step = 32;\n      const target = e.target.parentElement;\n      const touchY = target.getAttribute(\"pos-end\");\n      const moveDistance = touchY - target.getAttribute(\"pos-start\");\n      let index = Math.abs(Math.round(moveDistance / step)); // 格子数\n\n      // 记录移动的距离\n      const absDistance =\n        parseFloat(target.getAttribute(\"address-start\")) -\n        parseFloat(target.getAttribute(\"address-end\"));\n      const timestamp = new Date().getTime();\n      // 记录间隔时间\n      const timespace =\n        timestamp - parseFloat(target.getAttribute(\"start-time\"));\n      const rate = Math.round(absDistance) / timespace; // 变化比值\n      this.timer = rate * this.data[order].values.length / 5;\n      index = Math.round(index + this.timer);\n      let speed = 200;\n      if (Math.abs(Math.floor(this.timer)) >= 2) {\n        speed = 600;\n      }\n      if (Math.abs(Math.floor(this.timer)) >= 4) {\n        speed = 600;\n      }\n      if (Math.abs(Math.floor(this.timer)) > 6) {\n        speed = 800;\n      }\n      if (index < 0) {\n        index = 0;\n      }\n      if (index > this.data[order].values.length - 1) {\n        index = this.data[order].values.length - 1;\n      }\n      this.endMove(target, index, step, moveDistance, order, speed);\n    },\n    // 控制最后的滚动\n    endMove(target, index = 0, step, moveDistance = 0, order = 0, speed = 200) {\n      target.setAttribute(\"mov-distance\", -index * step);\n      this.transformStyle(target, -index * step, true, speed);\n      // 上边界判断\n      if (moveDistance > 0 * step) {\n        index = 0;\n        this.transformStyle(target, index * step);\n        target.setAttribute(\"mov-distance\", index * step);\n      }\n      // 下边界判断\n      if (moveDistance < -(this.data[order].values.length - 1) * step) {\n        index = this.data[order].values.length - 1;\n        this.transformStyle(target, -index * step);\n        target.setAttribute(\"mov-distance\", -index * step);\n      }\n      this.value[order] = index;\n      this.addClass(order, index);\n      if (this.value.length === this.data.length) {\n        this.$emit(\"change\", this.computeValue(this.value));\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.vsim-picker {\n  position: relative;\n  height: 160px;\n  overflow: hidden;\n}\n\n.vsim-picker-content {\n  display: flex;\n  height: 160px;\n  overflow: hidden;\n}\n\n.vsim-picker-line-top {\n  position: absolute;\n  width: 100%;\n  height: 1px;\n  top: 64px;\n  left: 0;\n  background: #e2e2e2;\n  transform: scaleY(0.5);\n}\n\n.vsim-picker-line-bottom {\n  position: absolute;\n  width: 100%;\n  height: 1px;\n  top: 96px;\n  left: 0;\n  background: #e2e2e2;\n  transform: scaleY(0.5);\n}\n\n.vsim-picker-list {\n  list-style: none;  \n  margin-top: 64px;\n  flex: 1;\n  font-size: 16px;\n}\n\n.vsim-picker-item {\n  height: 2em;\n  line-height: 2em;\n  font-size: 16px;\n}\n.vsim-picker-item-scale9 {\n  transform: scaleY(0.9);\n  color: #808080;\n}\n.vsim-picker-item-scale8 {\n  transform: scaleY(0.8);\n  color: #808080;\n}\n.vsim-picker-item-active {\n  transform: scaleY(1);\n    color: #474747;\n}\n</style>","\nimport VueSimplePicker from './src/VueSimplePicker.vue';\n\nexport default (Vue) => {\n    Vue.component('vs-picker', VueSimplePicker)\n}"]}